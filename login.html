<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Kreasiku: unggah & pamerkan portofolio, desain, logo, dan karya kreatif Anda.">
  <meta name="theme-color" content="#ffffff">
  <title>Login — Kreasiku</title>

  <!-- Global + page styles -->
  <link rel="stylesheet" href="css/global.css" />
  <link rel="stylesheet" href="css/login.css" />

  <!-- Same fonts used before (Sansita for “reasiku”) -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Sansita:wght@700&display=swap" rel="stylesheet">

  <script defer src="js/main.js"></script>
  <script defer src="js/api.js"></script>
</head>
<body>
  <div id="header"></div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.querySelector(".login-form");
      if (!form) return;

      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        const email = document.getElementById("email").value.trim();
        const name  = email.split("@")[0] || "Pengguna";

        try {
          const resp = await apiFetch('/auth/login.php', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({ email, name })
          });
          // simpan sedikit info untuk UI (nama/avatar), auth tetap via cookie PHP
          localStorage.setItem('authUser', JSON.stringify(resp.user));
          location.href = "pages/Account.html";
        } catch(err) {
          alert("Login gagal: " + err.message);
        }
      });
    });
  </script>

  <main class="login-wrap">
    <section class="login-area" aria-labelledby="loginTitle">
      <h1 id="loginTitle" class="login-title">Login to your Account</h1>
      <p class="login-sub">See what is going on with your business</p>

      <!-- Continue with Google -->
      <button class="btn-google" type="button" aria-label="Continue with Google">
        <span class="g-icon" aria-hidden="true">
          <!-- Inline Google “G” logo (no external assets) -->
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path d="M17.64 9.2045c0-.638-.057-1.252-.164-1.841H9v3.481h4.844c-.209 1.126-.842 2.08-1.796 2.72v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.618z" fill="#4285F4"/>
            <path d="M9 18c2.43 0 4.469-.806 5.959-2.177l-2.908-2.258c-.806.54-1.837.859-3.051.859-2.347 0-4.333-1.585-5.041-3.713H.955v2.332C2.436 15.983 5.481 18 9 18z" fill="#34A853"/>
            <path d="M3.959 10.711a5.41 5.41 0 010-3.422V4.957H.955A9 9 0 000 9c0 1.46.35 2.838.955 4.043l3.004-2.332z" fill="#FBBC05"/>
            <path d="M9 3.58c1.322 0 2.512.454 3.447 1.348l2.585-2.585C13.465.896 11.426 0 9 0 5.481 0 2.436 2.017.955 4.957l3.004 2.332C4.667 5.74 6.653 3.58 9 3.58z" fill="#EA4335"/>
          </svg>
        </span>
        <span>Continue with Google</span>
      </button>

      <div class="divider" role="separator">
        <span>or Sign in with Magic Email</span>
      </div>

      <form class="login-form" action="#" method="post" novalidate>
        <label for="email" class="field-label">Email</label>
        <input id="email" name="email" type="email" class="field-input" placeholder="mail@abc.com" required inputmode="email">

        <button type="submit" class="btn-login">Login</button>
      </form>
    </section>
  </main>

  <div id="footer"></div>
</body>
</html>
